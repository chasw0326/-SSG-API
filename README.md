# SSG-API

Welcome to the -SSG-API wiki!

## API 문서
- https://github.com/chasw0326/-SSG-API/wiki/API-%EB%AC%B8%EC%84%9C

## 테이블 설명

- https://github.com/chasw0326/-SSG-API/wiki/%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%84%A4%EB%AA%85

## 테스트 내용
- https://github.com/chasw0326/-SSG-API/wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%82%B4%EC%9A%A9

## 주안점
- 상품의 수와 가격의 변동폭이 크다고 생각해서 캐시의 도움을 받기 힘들것이라 판단했고
또한 상품목록API를 호출할때마다 매번 상품에 적용된 프로모션들중 가장 할인율이
높은 프로모션을 찾는 과정이 추가된다면 시간복잡도가 (상품 수 × 각 상품에 적용된 프로모션 수) 가
되기 때문에 시간이 너무 오래걸린다고 생각해서 상품 테이블 반정규화를 진행
- 상품데이터에 적용된 프로모션들중 할인율이 가장 높은 프로모션의 PK를
상품테이블에 FK로 두고 상품데이터 조회시 eager loading으로 불러온다.

- 할인율이 가장 높은 프로모션을 매번 찾지 않기 때문에 조회속도는 빨라졌지만,
수정, 삭제의 경우에는 프로모션을 갱신해주어야 함 
데이터의 정합성에 문제가 생기면 안 되기 때문에 다음의 경우들에 대해 적합한 프로모션을
찾아서 상품테이블의 프로모션(FK)을 갱신해줌 <br>

- 상품테이블의 프로모션(FK)을 갱신하는 경우들
   - `상품의 가격 변경` <br>
    ex) 가격이 10000원인 상품에 2000원 할인 프로모션 a, 10% 할인 프로모션 b가 있을 경우 
처음 프로모션 적용시에는 a가 할인율이 높지만 가격이 30000원이 되면 b로 변경해야함
   - `상품에 적용된 프로모션 해제` <br>
ex) 적용된 프로모션을 해제하면 다음 적합한 프로모션을 찾아서 상품테이블의 FK에 갱신해주어야함
   - `프로모션 자체가 삭제` <br>
ex) 삭제 된 프로모션을 FK로 갖고있던 상품들에대해 다음 적합한 프로모션을 찾아서 갱신해주어야함
   - `적용된 프로모션의 유효기간이 지남` <br>
ex) 상품테이블을 조회할 때 프로모션을 eager loading으로 같이 불러와서 날짜에 대한 체크를 진행하고
날짜가 지났을 경우 다음 적합한 프로모션을 찾아서 갱신


## 개발 환경
- Spring boot
- JAVA
- JPA 
- MYSQL
- H2 
